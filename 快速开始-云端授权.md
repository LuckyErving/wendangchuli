# 🚀 云端授权快速开始（5分钟上手）

## 第一步：获取 GitHub Token（2分钟）

1. 打开浏览器，访问：https://github.com/settings/tokens
2. 点击绿色按钮 **"Generate new token"** → 选择 **"Generate new token (classic)"**
3. 填写表单：
   - **Note**: `文档处理器授权` （随便写）
   - **Expiration**: 选择 **No expiration** 或 **1 year**
   - **Select scopes**: 只勾选 ✅ **`gist`**（其他都不要勾选）
4. 滚动到底部，点击绿色按钮 **"Generate token"**
5. **立即复制** 生成的 token（以 `ghp_` 开头，只显示一次！）

## 第二步：配置并测试（3分钟）

### 方式A：自动配置（推荐）⭐

```bash
# 1. 运行配置工具
python setup_cloud_license.py

# 2. 粘贴刚才复制的 token
# 请粘贴你的 GitHub Token: ghp_xxxxx

# 3. 按回车使用默认设置
# 最大使用次数 [默认: 200]: [直接回车]
# 网络超时（秒）[默认: 5]: [直接回车]

# 4. 测试
# 是否立即测试？(y/n): y

# 看到 ✅ 测试成功 就完成了！
```

### 方式B：手动配置

```bash
# 1. 编辑配置文件
nano license_config.py  # 或用任何编辑器

# 2. 填写 token
GITHUB_TOKEN = "ghp_你复制的token"

# 3. 保存退出

# 4. 测试
python cloud_license.py
```

## 🎉 完成！

配置成功后，你会看到类似这样的输出：

```
[云授权] 设备ID: abcd1234efgh5678...
[云授权] 缓存文件: ~/.docproc_cache/.license_cache
[云授权] 首次使用，初始化数据
[云授权] ✅ 创建 Gist 成功: a1b2c3d4e5f6
[云授权] ✅ 保存到云端成功
[云授权] ✅ 检查通过，剩余次数: 199

结果: True
消息: 剩余次数: 199
```

## 📱 查看你的数据

打开浏览器访问：
```
https://gist.github.com/你的GitHub用户名
```

你会看到一个私有 Gist，里面存储着所有设备的使用数据。

## 🔧 现在可以做什么？

### 1. 集成到主程序

修改 `document_processor.py`，在 `SimpleGUI.__init__()` 中：

```python
# 替换原来的授权管理器
from cloud_license import CloudLicenseManager
self.license_manager = CloudLicenseManager()
```

### 2. 打包发布

```bash
# 确保已安装 requests
pip install requests

# 打包
pyinstaller document_processor.spec

# 分发 exe 文件
```

### 3. 监控使用情况

访问你的 Gist 网页，实时查看：
- 有多少台设备在使用
- 每台设备使用了多少次
- 最后使用时间
- 设备操作系统

### 4. 管理设备

在 Gist 页面点击 "Edit"，可以：
- 重置某台设备的使用次数
- 禁用某台设备（删除或设置 count=200）
- 查看使用历史

## ❓ 遇到问题？

### Token 没有权限
- 确保勾选了 **gist** 权限
- 重新生成 token

### 网络连接失败
- 检查网络连接
- 程序会自动使用本地缓存
- 联网后会自动同步

### 测试失败
```bash
# 查看详细错误
python cloud_license.py
```

## 💡 提示

- ✅ Token 是敏感信息，不要分享给别人
- ✅ Token 可以随时在 GitHub 删除和重新生成
- ✅ 离线时程序仍然可以使用（用缓存）
- ✅ 多台电脑可以使用同一个 Token（每台独立计数）

## 🎯 下一步

1. ✅ 已完成云端授权配置
2. ⏳ 集成到主程序
3. ⏳ 测试打包后的 exe
4. ⏳ 分发给用户使用

---

**恭喜！你现在拥有了一个企业级的云端授权系统！** 🎉
