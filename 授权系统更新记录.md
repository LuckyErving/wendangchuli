# 授权系统集成完成

## 更新内容

已成功为文档处理器添加设备绑定和使用次数限制功能。

### 主要功能

1. **设备绑定**
   - 基于MAC地址的唯一设备识别
   - 程序首次运行自动绑定到当前设备
   - 防止在其他设备上运行

2. **使用限制**
   - 每台设备限制使用200次
   - 使用次数加密保存
   - 达到上限后显示"程序已损坏"错误

3. **用户提示**
   - 界面显示剩余使用次数
   - 剩余≤20次时弹窗警告
   - 达到上限时阻止运行

### 技术实现

- **LicenseManager类**: 管理设备授权和使用计数
- **加密存储**: Base64+SHA256混淆保护
- **隐藏配置**: 配置文件存储在用户隐藏目录
- **GUI集成**: 启动时自动检查授权状态

### 文件说明

- `document_processor.py`: 主程序（已集成授权检查）
- `test_license.py`: 授权系统测试工具
- `设备授权说明.md`: 详细技术文档

### 测试验证

✅ 首次使用绑定设备  
✅ 使用次数正确计数  
✅ 达到200次后阻止运行  
✅ 剩余次数提示正常  
✅ 加密存储功能正常  

### 下一步

1. 测试GUI程序运行
2. 验证打包后的exe表现
3. 确认跨平台兼容性（Windows/macOS）

### 使用测试工具

```bash
# 查看授权状态
python3 test_license.py

# 模拟使用10次
python3 test_license.py --simulate 10

# 重置授权（开发测试用）
python3 test_license.py --reset
```

### 注意事项

⚠️ 打包前请重置授权记录，确保用户首次使用时才开始计数  
⚠️ 配置文件路径：
  - Windows: `%APPDATA%\.docproc\.lic`
  - macOS: `~/.docproc/.lic`
